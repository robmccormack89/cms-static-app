{% extends "archive.twig" %}

{% block archive_content %}
  {% if archive.posts %}
    <!-- events toolbar -->
    <nav class="archive-toolbar uk-grid uk-grid-match uk-flex uk-flex-middle uk-grid-collapse" uk-grid>
      <div class="events-breads uk-width-expand">
        {% include 'breads.twig' %}
      </div>
      <div class="results-count uk-width-auto">
        <p class="uk-text-bold uk-text-emphasis uk-text-small">
          {% if archive.pagination.results %}
            {{archive.pagination.results}}
          {% endif %}
        </p>
      </div>
    </nav>
  {% endif %}
  
  <div class="archive-main uk-section uk-section-small">
    
    <!-- blog posts -->
    <section class="archive-posts uk-margin-bottom">
      
      <!-- blog posts grid -->
      <div class="posts-grid uk-child-width-1-3@m uk-grid-column-medium uk-grid-row-large" uk-grid="masonry: true">
        {% if archive.posts %}
          {% for post in archive.posts %}
            <article class="the-post">
              
              <!-- tease featured -->
              {% if post.featured_img %}
                {% if post.format == 'audio' or post.format == 'video' %}
                  {% if post.featured_img.frame_src %}
                    <figure class="blog-grid-image uk-cover-container uk-height-medium">
                      <iframe src="{{post.featured_img.frame_src}}" class="object-fitting uk-border-rounded" frameborder="0" allowfullscreen></iframe>
                    </figure>
                  {% endif %}
                {% else %}
                  <figure class="blog-grid-image">
                    <a class="uk-inline uk-link-reset hover-grow-wrap uk-border-rounded" href="{{post.link}}">
                      <img class="uk-border-rounded" data-src="{{post.featured_img.src|resize(500)}}" data-width data-height alt="{{post.featured_img.alt}}" uk-img>
                    </a>
                  </figure>
                {% endif %}
              {% endif %}
              
              <!-- tease meta -->
              {% if post.taxonomies.categories or post.taxonomies.technologies or post.read_time %}
                <div class="post-details uk-margin uk-margin-small-bottom">
                  {% if post.taxonomies.categories %}
                    <div class="taxonomy-holder uk-inline">
                      {% for cat in post.taxonomies.categories %}
                        {% if not loop.last %}
                          <a class="taxonomy uk-link-reset" title="{{cat.title}}" href="{{cat.link}}">{{cat.title}}</a>,
                        {% else %}
                          <a class="taxonomy uk-link-reset" title="{{cat.title}}" href="{{cat.link}}">{{cat.title}}</a>
                        {% endif %}
                      {% endfor %}
                    </div>
                  {% endif %}
                  {% if post.taxonomies.technologies %}
                    <div class="taxonomy-holder uk-inline">
                      {% for tech in post.taxonomies.technologies %}
                        {% if not loop.last %}
                          <a class="taxonomy uk-link-reset" title="{{tech.title}}" href="{{tech.link}}">{{tech.title}}</a>,
                        {% else %}
                          <a class="taxonomy uk-link-reset" title="{{tech.title}}" href="{{tech.link}}">{{tech.title}}</a>
                        {% endif %}
                      {% endfor %}
                    </div>
                  {% endif %}
                  {% if post.taxonomies.locations %}
                    <div class="taxonomy-holder uk-inline">
                      {% for loc in post.taxonomies.locations %}
                        {% if not loop.last %}
                          <a class="taxonomy uk-link-reset" title="{{loc.title}}" href="{{loc.link}}">{{loc.title}}</a>,
                        {% else %}
                          <a class="taxonomy uk-link-reset" title="{{loc.title}}" href="{{loc.link}}">{{loc.title}}</a>
                        {% endif %}
                      {% endfor %}
                    </div>
                  {% endif %}
                  {% if post.read_time %}
                    <span class="post-meta-estimate">{{post.read_time}} read</span>
                  {% endif %}
                </div>
              {% endif %}
              
              <!-- tease title -->
              <h3 class="post-headline uk-margin-remove">
                <a class="uk-link-heading" href="{{post.link}}">{{post.title}}.</a>
              </h3>
              
              <!-- tease excerpt -->
              {% if post.excerpt %}
                {% if post.format == 'quote' %}
                  <blockquote cite="#">
                    <p class="uk-margin-remove">{{post.excerpt|raw}}</p>
                  </blockquote>
                {% else %}
                  <p class="post-excerpt uk-margin-small-top">{{post.excerpt|raw}}....</p>
                {% endif %}
              {% endif %}
              
              <!-- tease link -->
              <a class="style-btn uk-text-capitalize uk-animation-toggle" href="{{post.link}}" tabindex="0">
                Read more <i class="fas fa-arrow-right uk-margin-small-left uk-animation-slide-left"></i>
              </a>
              
            </article>
          {% endfor %}
        {% else %}
          <span class="uk-text-emphasis">No posts found here...</span>
        {% endif %}
      </div>
      
      {% block archive_pagi %}
        <!-- blog pagination -->
        {% if (archive.pagination.next or archive.pagination.prev) %}
          <div class="archive-pagination uk-section">
            <ul class="uk-pagination">
              {% if archive.pagination.prev %}
                <li>
                  <a class="prev style-btn uk-text-capitalize uk-animation-toggle" href="{{archive.pagination.prev}}" tabindex="0">
                    <i class="fas fa-arrow-left uk-margin-small-right uk-animation-slide-right"></i> Previous
                  </a>
                </li>
              {% endif %}
              {% for page in archive.pagination.pages %}
                {% if page.class == 'uk-active' %}
                  <li class="{{page.class}}"><span>{{page.title}}</span></li>
                {% else %}
                  <li class="{{page.class}}"><a class="style-btn" href="{{page.link}}">{{page.title}}</a></li>
                {% endif %}
              {% endfor %}
              {% if archive.pagination.next %}
                <li>
                  <a class="next style-btn uk-text-capitalize uk-animation-toggle" href="{{archive.pagination.next}}" tabindex="0">
                    Next <i class="fas fa-arrow-right uk-margin-small-left uk-animation-slide-left"></i>
                  </a>
                </li>
              {% endif %}
            </ul>
          </div>
        {% endif %}
      {% endblock %}
      
    </section>

  </div>
{% endblock %}

{% block archive_widgets %}
{% endblock %}